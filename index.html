<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>WORDLE</title>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<link rel="icon" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS5Xs3Am9a3KmIBOEeVAM6zCD2w8d3qZ36XDw&s" sizes="16√ó16" type="image/png" /> 
<style>
body{
  margin:0;
  background:#121213;
  color:#fff;
  font-family:system-ui,-apple-system,BlinkMacSystemFont;
  display:flex;
  justify-content:center;
}
#app{max-width:500px;width:100%;padding:10px;text-align:center;}
header{display:flex;justify-content:space-between;align-items:center;}
h1{margin:0;font-size:2rem;letter-spacing:2px;}
#number{opacity:.7;font-size:.9rem;}

.grid{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:6px;
  margin:20px auto 10px;
}
.cell{
  aspect-ratio:1;
  border:2px solid #3a3a3c;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:2rem;
  font-weight:700;
}
.filled{border-color:#565758;}
.correct{background:#538d4e;border-color:#538d4e;}
.present{background:#b59f3b;border-color:#b59f3b;}
.absent{background:#3a3a3c;border-color:#3a3a3c;}

#results{
  margin:10px 0;
  font-size:1.2rem;
  line-height:1.4;
  white-space:pre;
}

.keyboard{
  display:grid;
  grid-template-columns:repeat(10,1fr);
  gap:6px;
}
.key{
  background:#818384;
  color:#000;
  border:none;
  border-radius:4px;
  padding:12px 0;
  font-weight:bold;
}
.key.correct{background:#538d4e;color:#fff;}
.key.present{background:#b59f3b;color:#fff;}
.key.absent{background:#3a3a3c;color:#fff;}
.key.wide{grid-column:span 2;}

#msg{min-height:1.5em;margin:8px;font-size:.95rem;}

/* „Éë„Çπ„ÉØ„Éº„Éâ */
#overlay{
  position:fixed; inset:0;
  background:rgba(0,0,0,.7);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:10;
}
#modal{
  background:#222;
  padding:20px;
  border-radius:8px;
  width:260px;
}
#modal input{
  width:100%;
  padding:8px;
  font-size:1rem;
}
</style>
</head>
<body>

<div id="app">
  <header>
    <h1>WORDLE<br></h1>
      <button onclick="resetGame()">New Game</button>
    <div id="number"></div>
  </header>
  <div id="msg"></div>
  <div class="grid" id="grid"></div>
  <div id="results"></div>
  <div class="keyboard" id="kb"></div>
</div>

<div id="overlay">
  <div id="modal">
    <p>„Éë„Çπ„ÉØ„Éº„Éâ</p>
    <input type="password" id="pass">
  </div>
</div>

<script>
const WORDS = [
"cigar","rebut","sissy","humph","awake","blush","focal","evade","naval","serve",
"heath","dwarf","model","karma","stink","grade","quiet","bench","abate","feign",
"major","death","fresh","crust","stool","colon","abase","marry","react","batty",
"pride","floss","helix","croak","staff","paper","unfed","whelp","trawl","outdo",
"adobe","crazy","sower","repay","digit","crate","cluck","spike","mimic","pound",
"maxim","linen","unmet","flesh","booby","forth","first","stand","belly","ivory",
"seedy","print","yearn","drain","bribe","stout","panel","crass","flume","offal",
"agree","error","swirl","argue","bleed","delta","flick","totem","wooer","front",
"shrub","parry","biome","lapel","start","greet","goner","golem","lusty","loopy",
"round","audit","lying","gamma","labor","islet","civic","forge","corny","moult",
"basic","salad","agate","spicy","spray","essay","fjord","spend","kebab","guild",
"aback","motor","alone","hatch","hyper","thumb","dowry","ought","belch","dutch",
"pilot","tweed","comet","jaunt","enema","steed","abyss","growl","fling","dozen",
"boozy","erode","world","about","other","which","there","their","apple",

/* === ËøΩÂä†ÂàÜ === */
"alert","angle","angry","arise","array","baker","beach","beard","bison","black",
"blade","brain","brake","brick","bring","broad","brown","build","cable","camel",
"carry","catch","cause","chain","chair","charm","chase","cheap","check","chess",
"chief","china","choir","claim","clean","clear","climb","clock","close","cloud",
"coach","coast","could","count","court","cover","cream","cross","crowd","dance",
"dealt","delay","depth","dirty","doubt","dozen","draft","drama","dream","dress",
"drink","drive","early","earth","empty","enjoy","enter","equal","event","every",
"faith","false","fault","field","fight","final","floor","focus","force","frame",
"frank","giant","given","glass","globe","grace","grand","grant","grass","great",
"green","group","guard","guess","guest","guide","happy","heart","heavy","honor",
"horse","hotel","house","human","ideal","image","index","inner","input","issue",
"japan","joint","judge","juice","known","label","large","laser","laugh","layer",
"learn","least","leave","legal","level","light","limit","local","logic","loose",
"lunch","magic","major","match","maybe","metal","might","minor","money","month",
"moral","motor","mount","mouse","music","never","night","noise","north","novel",
"nurse","occur","ocean","offer","often","order","other","owner","paint","panel",
"party","peace","phone","photo","piece","pilot","pitch","place","plain","plane","pulsh",
"plant","plate","point","power","press","price","pride","prime","print","prior",
"prove","queen","quick","quiet","raise","range","rapid","reach","ready","right",
"rival","river","rough","round","route","royal","scale","scene","scope","score",
"sense","serve","seven","shall","shape","share","sharp","sheet","shift","shoot",
"short","sight","since","skill","sleep","small","smart","smile","solid","solve",
"sorry","sound","south","space","spare","speak","speed","spend","split","sport",
"staff","stage","stand","start","state","steam","steel","stick","still","stock",
"stone","store","storm","story","strip","study","stuff","style","sugar","table",
"teach","thank","their","theme","thick","thing","think","third","those","three",
"throw","tight","times","today","topic","total","touch","tower","track","trade",
"train","treat","trend","trial","trust","truth","under","union","unity","upper",
"usage","usual","valid","value","video","visit","voice","waste","watch","water",
"wheel","where","while","white","whole","woman","world","worry","worse","worth",
"would","write","wrong","young"
];


const ROWS=6,COLS=5;
let save=JSON.parse(localStorage.getItem("wordle-save")||"{}");

let index=save.index??0;
let grid=save.grid??Array.from({length:ROWS},()=>Array(COLS).fill(""));
let row=save.row??0;
let col=save.col??0;
let done=save.done??false;
let emojiResults=save.emojiResults??[];

const ANSWER=WORDS[index%WORDS.length];
document.getElementById("number").textContent=`#${index+1}`;

const gridEl=document.getElementById("grid");
const resultsEl=document.getElementById("results");
resultsEl.textContent=emojiResults.join("\n");

function draw(){
  gridEl.innerHTML="";
  grid.flat().forEach(c=>{
    const d=document.createElement("div");
    d.className="cell"+(c?" filled":"");
    d.textContent=c;
    gridEl.appendChild(d);
  });
}
draw();

const KEYS=[..."QWERTYUIOP",..."ASDFGHJKL","ENTER",..."ZXCVBNM","‚Üê",];
const kb=document.getElementById("kb");
const keyEls={};

KEYS.forEach(k=>{
  const b=document.createElement("button");
  b.textContent=k;
  b.className="key"+(k==="ENTER"||k==="‚Üê"?" wide":"");
  b.onclick=()=>press(k);
  kb.appendChild(b);
  keyEls[k]=b;
});

let overlayOpen=false;

function press(k){
  if(done||overlayOpen) return;
  if(k==="‚Üê"){
    if(col>0){col--;grid[row][col]="";}
  }else if(k==="ENTER"){
    if(col===COLS) submit();
  }else if(col<COLS){
    grid[row][col]=k;
    col++;
  }
  saveData();
  draw();
}

document.addEventListener("keydown",e=>{
  if(e.ctrlKey&&e.altKey&&e.key.toLowerCase()==="l"){
    overlay.style.display="flex";
    overlayOpen=true;
    pass.value="";pass.focus();
    return;
  }
  if(overlayOpen) return;

/*  if(e.ctrlKey&&e.key==="r"){
    e.preventDefault();
    index++;
    localStorage.setItem("wordle-save",JSON.stringify({index}));
    location.reload();
  }

  */
if(e.ctrlKey&&e.key==="r"){
    resetGame();
  }
function resetGame(){
    e.preventDefault();
    index++;
    localStorage.setItem("wordle-save",JSON.stringify({index}));
    location.reload();
}

  if(e.key==="Enter") press("ENTER");
  if(e.key==="Backspace") press("‚Üê");
  if(/^[a-zA-Z]$/.test(e.key)) press(e.key.toUpperCase());
});

function submit(){
  const w=grid[row].join("").toLowerCase();
  if(!WORDS.includes(w)) return msg("ËæûÊõ∏„Å´„ÅÇ„Çä„Åæ„Åõ„Çì");

  const answer=[...ANSWER];
  const cells=[...gridEl.children].slice(row*5,row*5+5);
  let state=Array(5).fill("absent");

  for(let i=0;i<5;i++){
    if(w[i]===answer[i]){
      state[i]="correct";answer[i]=null;
    }
  }
  for(let i=0;i<5;i++){
    if(state[i]!=="correct"){
      const n=answer.indexOf(w[i]);
      if(n>-1){state[i]="present";answer[n]=null;}
    }
  }

  state.forEach((s,i)=>{
    cells[i].classList.add(s);
    const el=keyEls[grid[row][i]];
    if(el&&!el.classList.contains("correct")){
      el.className="key "+s+(el.classList.contains("wide")?" wide":"");
    }
  });

  const emojiLine=state.map(s=>s==="correct"?"üü©":s==="present"?"üü®":"‚óºÔ∏è").join("");
  emojiResults.push(emojiLine);
  resultsEl.textContent=emojiResults.join("\n");

  if(w===ANSWER) return finish(true);
  row++;col=0;
  if(row===ROWS) finish(false);
  saveData();
}

function finish(win){
  done=true;
  msg(win?"üéâ Ê≠£Ëß£ÔºÅ":"üíÄ "+ANSWER.toUpperCase());
  saveData();
}

function msg(t){document.getElementById("msg").textContent=t;}

function saveData(){
  localStorage.setItem("wordle-save",JSON.stringify({
    index,grid,row,col,done,emojiResults
  }));
}

// „Éë„Çπ„ÉØ„Éº„Éâ
const overlay=document.getElementById("overlay");
const pass=document.getElementById("pass");
pass.addEventListener("keydown",e=>{
  e.stopPropagation();
  if(e.key==="Enter"){
    if(pass.value==="appleQer!") msg("Á≠î„ÅàÔºö"+ANSWER.toUpperCase());
    overlay.style.display="none";
    overlayOpen=false;
  }
});
resetGame.onclick=resetGame();
</script>
    
</body>
</html>
